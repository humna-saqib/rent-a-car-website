<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Car - Agent - Rent-a-Car</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body class="a-dashboard">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="../../index.html">
          <i class="bi bi-car-front-fill me-2"></i>
          Rent-a-Car Agent
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="agent-dashboard.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="add-car.html">Add Car</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="booking-requests.html"
                >Booking Requests</a
              >
            </li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item">
              <button class="btn btn-outline-light logout-btn">Logout</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Add Car Content -->
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card">
            <div class="card-header">
              <h4 class="mb-0">
                <i class="bi bi-plus-circle-fill me-2"></i>
                Add New Car
              </h4>
            </div>
            <div class="card-body">
              <form id="addCarForm" enctype="multipart/form-data">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="carName" class="form-label">Car Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="carName"
                      name="name"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="carModel" class="form-label">Model Year</label>
                    <input
                      type="text"
                      class="form-control"
                      id="carModel"
                      name="model"
                      required
                    />
                  </div>
                </div>

                <div class="mb-3">
                  <label for="carType" class="form-label">Car Type</label>
                  <select class="form-select" id="carType" name="type" required>
                    <option value="">Select Type</option>
                    <option value="Sedan">Sedan</option>
                    <option value="SUV">SUV</option>
                    <option value="Sports">Sports</option>
                    <option value="Luxury">Luxury</option>
                    <option value="Compact">Compact</option>
                    <option value="Truck">Truck</option>
                  </select>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="pricePerHour" class="form-label"
                      >Price per Hour ($)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="pricePerHour"
                      name="pricePerHour"
                      min="0"
                      step="0.01"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="pricePerDay" class="form-label"
                      >Price per Day ($)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="pricePerDay"
                      name="pricePerDay"
                      min="0"
                      step="0.01"
                      required
                    />
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="pricePerWeek" class="form-label"
                      >Price per Week ($)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="pricePerWeek"
                      name="pricePerWeek"
                      min="0"
                      step="0.01"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="pricePerMonth" class="form-label"
                      >Price per Month ($)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="pricePerMonth"
                      name="pricePerMonth"
                      min="0"
                      step="0.01"
                      required
                    />
                  </div>
                </div>

                <!-- Car Image Upload -->
                <div class="mb-3">
                  <label for="carImage" class="form-label">Car Image</label>
                  <input
                    type="file"
                    class="form-control"
                    id="carImage"
                    name="image"
                    accept="image/*"
                    required
                  />
                </div>

                <div class="d-grid">
                  <button type="submit" class="btn btn-primary">
                    <i class="bi bi-plus-circle-fill me-2"></i>
                    Add Car
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const addCarForm = document.getElementById("addCarForm");

        addCarForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Get form values
          const name = document.getElementById("carName").value.trim();
          const model = document.getElementById("carModel").value.trim();
          const type = document.getElementById("carType").value;
          const pricePerHour = document.getElementById("pricePerHour").value;
          const pricePerDay = document.getElementById("pricePerDay").value;
          const pricePerWeek = document.getElementById("pricePerWeek").value;
          const pricePerMonth = document.getElementById("pricePerMonth").value;
          const imageInput = document.getElementById("carImage");

          if (!imageInput.files[0]) {
            alert("Please select an image for the car!");
            return;
          }

          // Convert image to Base64
          const reader = new FileReader();
          reader.onload = function () {
            const imageData = reader.result; // Base64 string

            // Get existing cars from localStorage
            const cars = JSON.parse(localStorage.getItem("cars")) || [];

            // Add new car
            cars.push({
              name,
              model,
              type,
              pricePerHour,
              pricePerDay,
              pricePerWeek,
              pricePerMonth,
              image: imageData,
            });

            // Save back to localStorage
            localStorage.setItem("cars", JSON.stringify(cars));

            alert("Car added successfully!");
            addCarForm.reset();
          };

          reader.readAsDataURL(imageInput.files[0]);
        });
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/script.js"></script>
  </body>
</html>
